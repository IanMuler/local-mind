<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LocalMind - RPG Game</title>
  
  <!-- Preload font for better performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  
  <!-- Main CSS -->
  <link rel="stylesheet" href="src/css/main.css">
</head>
<body>
  <!-- Canvas wrapper with floating buttons -->
  <div class="canvas-wrapper">
    <canvas id="gameCanvas" width="350" height="350"></canvas>

    <!-- Floating delete buttons -->
    <button id="deleteObjectBtn" class="btn btn--danger btn--floating is-hidden" aria-label="Eliminar objeto">×</button>
    <button id="configObjectBtn" class="btn btn--secondary btn--floating is-hidden" aria-label="Configurar objeto">⚙</button>
    <button id="deleteCollisionBtn" class="btn btn--info btn--floating is-hidden" aria-label="Eliminar colisión">×</button>
  </div>

  <!-- Tools container - fixed bottom right -->
  <div class="tools-container">
    <button id="toolsButton"
            class="btn tools-button"
            aria-haspopup="true"
            aria-expanded="false"
            aria-label="Abrir herramientas">
      <img src="img/Gear.svg" alt="Herramientas" class="tool-icon">
    </button>

    <div id="toolsDropdown"
         class="tools-dropdown"
         role="menu"
         aria-hidden="true">
      <!-- Item Modo objetos -->
      <div class="tools-item" role="menuitemcheckbox" aria-checked="false">
        <span class="tools-label">Modo objetos</span>
        <label class="switch" for="objectToggle">
          <input type="checkbox"
                 id="objectToggle"
                 role="switch"
                 aria-label="Activar modo objetos">
          <span class="switch__slider"></span>
        </label>
      </div>
      
      <!-- Item Modo colisiones -->
      <div class="tools-item" role="menuitemcheckbox" aria-checked="false">
        <span class="tools-label">Modo colisiones</span>
        <label class="switch" for="collisionToggle">
          <input type="checkbox"
                 id="collisionToggle"
                 role="switch"
                 aria-label="Activar modo colisiones">
          <span class="switch__slider"></span>
        </label>
      </div>
      
      <!-- Guardar (oculto hasta activar algún modo) -->
      <button id="saveBounds"
              class="btn save-btn"
              hidden>
        Guardar
      </button>
    </div>
  </div>

  <!-- Messages (initially hidden) -->
  <div id="messagesContainer" class="messages-container is-hidden">
    <span id="collisionMsg" class="msg" aria-live="polite"></span>
    <span id="objectMsg" class="msg" aria-live="polite"></span>
  </div>

  <!-- PANEL OBJETOS -->
  <aside id="objectPanel" class="panel" aria-label="Panel de objetos">
    <div id="objectList" class="thumb-grid"></div>
    <button id="addObject" class="btn" disabled>Añadir</button>
    <button id="saveObjects" class="btn">Guardar</button>
  </aside>

  <!-- Modal NIVEL -->
  <div id="levelModal" class="modal hidden">
    <div class="modal__backdrop"></div>

    <div class="modal__content" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Nivel de superposición</h3>

      <input type="number"
             id="nivelInput"
             min="0" max="3" step="1" />

      <div class="modal__buttons">
        <button id="nivelCancel" class="btn">Cancelar</button>
        <button id="nivelSave" class="btn btn--primary">Guardar</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="src/js/utils.js"></script>
  <script src="src/js/classes.js"></script>
  <script src="src/js/index.js"></script>
</body>
</html>